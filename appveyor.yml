artifacts:
  - path: dist

branches:
  only:
    - $env.source_branch

build_script:
  - ps: "Install-Product node 8 x64"
  - yarn install
  - npm run build

environment:
  access_token:
    secure: H9sFhjbuf7fSmveMmHPdTG/IeGFYL+vOBrAeN2CTvoV1QrlOrCvjCI+VuMiGUYfu
  source_branch: develop

image: Visual Studio 2017

on_success:
  - git config --global credential.helper store
  - ps: Add-Content "$env:USERPROFILE\.git-credentials" "https://$($env:access_token):x-oauth-basic@github.com\n"
  - git config --global user.email "rlmcneary2@gmail.com"
  - git config --global user.name "Rich McNeary"
  - xcopy dist ..\temp\ /E
  - git checkout -b gh-pages
  - ps: Remove-Item * -Recurse -Force
  - xcopy ..\temp .\ /E /Y
  - dir
#  - git commit -m "AppVeyor build: $env.source_branch" -a
#  - git push origin gh-pages

test: off

version: 1.0.{build}
