# Explore Acadia!

[![Netlify Status](https://api.netlify.com/api/v1/badges/2d3507cb-fb11-49c1-9103-5dd1d9407228/deploy-status)](https://app.netlify.com/sites/acadia-explorer/deploys)

A single-page progressive web app targeted at mobile devices that displays the current locations of Island Explorer buses on their routes. Includes information about landmarks along the routes as well as bus stops.

You can try out the develop branch deployed to [Netlify](https://app.netlify.com/sites/acadia-explorer/overview), *note that if you are using a desktop browser you will want to open its developer tools `[F12]` and enable responsive design mode then choose a mobile phone for display*.
https://develop--acadia-explorer.netlify.com/

## Features
This application is a work-in-progress. Here are the fetaures that currently work:
* Select an Island Explorer route.
* A map displays the path of the route along with the locations of bus stops.
* Locations of buses along the route are displayed and updated every 15 seconds.
* Information about a route and the stops along it can be displayed (route data is incomplete at this time).

More features will be added in the future including:
* Landmarks along a route, such as trailheads, will be optionally displayed on the map.
* Tooltips for map stops and landmarks that display details.
* Native mobile notifications when a bus is approaching a stop.
* Responsive for desktop use.

## Technical
For software developers and other curious types.

### Packages
* Anything in the application that could be JavaScript is Typescript.
* The UI is built using React.
* Application state and async actions are done by Redux.
* Routing via React Router.
* Localization is accomplished using React-Intl.
* Mapping uses Mapbox with OpenStreetMap.
* Conversion of KML files to GeoJson: Mapbox togeojson.
* Progressive web app support (workbox-webpack-plugin) for offline use and native integration on Android (this will be replaced when notifications are implemented).
* A WebWorker is used to fetch resources in a non-UI thread.
* All styling is done using Sass.
* Webpack along with a variety of loaders and plugins (awesome-typescript-loader, copy-webpack-plugin, html-webpack-plugin, etc.) is used to build the `dist` application directory and its contents.

### Build
You're on Github so you probably have figured out that source control is done by git. Clone the repo then `cd` into it, `npm install`, and when it finishes `npm run serve`. Open a browser and navigate to: http://localhost:8080/

### Deploy
After every check-in the source code is cloned to Netlify where it is built and deployed.

### Associated Repos
During some times of the year no buses are running. You can use the [acadia explorer dev server](https://github.com/rlmcneary2/acadia-explorer-dev-server) to replay about 4 hours worth of captured bus responses. Also a source file has to be [updated](https://github.com/rlmcneary2/acadia-explorer/blob/f518c345801956d3cc46c6cdd14598f7d13e6cb3/src/app/action/api.ts#L76).

Some of the app data is fetched from the server, other data is provided in `/data/acadia/app.json`. This file is generated by running the [acadia explorer data](https://github.com/rlmcneary2/acadia-explorer-data) node application. This application uses raw data to assemble the complete app.json file.
